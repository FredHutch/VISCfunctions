% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/step_curves.R
\name{create_step_info}
\alias{create_step_info}
\title{Creating Points for Step Lines}
\usage{
create_step_info(x, event = NULL)
}
\arguments{
\item{x}{values to create step curve for (numeric vector)}

\item{event}{event status, 0=censor and 1=event (numeric vector).
If NULL assumes no censoring}
}
\value{
Returns a data frame with time, \code{surv}, \code{n.risk},
  \code{n.event}, and \code{n.censor} (\code{survival::summary.survfit}
  output format)
}
\description{
Creates step curve info for survival Kaplan-Meier (KM) plots and magnitude
 breath (MB) plots
}
\details{
The output can be used for plotting step function curves,
  with \code{time} on the x axis, \code{surv} on the y axis, and
  \code{n.censor == 1} subset can be used for a \code{ggplot2::geom_point()}
  layer.
}
\examples{

create_step_info(x = 1:10)
create_step_info(x = 1:10, event = rep(0:1, 5))

library(dplyr)
dat = data.frame(x = c(1:10),
                 event = c(1,1,0,1,1,0,0,1,1,1),
                 ptid = c(1,1,2,2,3,3,3,3,3,3))
plot_data <-
 dat \%>\%
  dplyr::group_by(ptid) \%>\%
  dplyr::group_modify(~ create_step_info(x = .x$x, event = .x$event))

ggplot2::ggplot(data = plot_data,
                ggplot2::aes(x = time, y = surv, color = factor(ptid))) +
 ggplot2::geom_step(linetype = "dashed", direction = 'hv', lwd = .35) +
 ggplot2::geom_point(data = plot_data \%>\% filter(n.censor == 1),
                     shape = 3, size = 6, show.legend = FALSE)

}
